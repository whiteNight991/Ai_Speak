<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Speak! - 언어 발음 연습</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Main Screen -->
        <div id="mainScreen" class="screen active">
            <div class="container">
                <h1 class="logo">AI Speak!</h1>
                <p class="subtitle">AI 기반 언어 발음 연습 서비스</p>
                <button class="btn-primary" id="startBtn">시작하기</button>
            </div>
        </div>

        <!-- Selection Screen -->
        <div id="selectionScreen" class="screen">
            <div class="container">
                <h2 class="section-title">학습 설정</h2>
                
                <!-- Step 1: Language Selection -->
                <div class="selection-step">
                    <h3>1. 언어 선택</h3>
                    <div class="option-group">
                        <button class="option-btn" data-language="ko">
                            <span class="icon">🇰🇷</span>
                            <span>한국어</span>
                        </button>
                        <button class="option-btn" data-language="en">
                            <span class="icon">🇺🇸</span>
                            <span>영어</span>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Sentence Length -->
                <div class="selection-step">
                    <h3>2. 문장 길이</h3>
                    <div class="option-group">
                        <button class="option-btn" data-length="short">
                            <span class="icon">📝</span>
                            <span>짧은 문장</span>
                        </button>
                        <button class="option-btn" data-length="long">
                            <span class="icon">📄</span>
                            <span>긴 문장</span>
                        </button>
                    </div>
                </div>

                <!-- Step 3: Category Selection -->
                <div class="selection-step">
                    <h3>3. 카테고리 선택</h3>
                    <div class="option-group category-grid">
                        <button class="option-btn" data-category="quote">명언</button>
                        <button class="option-btn" data-category="book">서적</button>
                        <button class="option-btn" data-category="movie">영화/드라마</button>
                        <button class="option-btn" data-category="music">음악/가사</button>
                        <button class="option-btn" data-category="news">뉴스/시사</button>
                        <button class="option-btn" data-category="sns">SNS/트렌드</button>
                        <button class="option-btn" data-category="philosophy">철학/사유</button>
                        <button class="option-btn" data-category="daily">일상/감정</button>
                    </div>
                </div>

                <button class="btn-primary" id="generateBtn" disabled>문장<br>생성하기</button>
            </div>
        </div>

        <!-- Loading Screen -->
        <div id="loadingScreen" class="screen">
            <div class="container">
                <h2>문장을 생성하고 있습니다...</h2>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
                <p class="loading-text">잠시만 기다려주세요</p>
            </div>
        </div>

        <!-- Practice Screen -->
        <div id="practiceScreen" class="screen">
            <div class="container">
                <div class="practice-header">
                    <h2>발음 연습</h2>
                    <button class="btn-secondary" id="backBtn">← 돌아가기</button>
                </div>

                <div class="sentence-display">
                    <h3>연습할 문장</h3>
                    <p id="targetSentence"></p>
                </div>

                <div class="video-container">
                    <video id="videoElement" autoplay playsinline></video>
                    <canvas id="lipCanvas"></canvas>
                    <div id="lipIndicator" class="lip-indicator">입술 인식 중...</div>
                </div>

                <div class="control-buttons">
                    <button class="btn-control" id="recordBtn">
                        <span class="icon">🎙️</span>
                        <span>녹화 시작</span>
                    </button>
                    <button class="btn-control" id="stopBtn" disabled>
                        <span class="icon">⏹️</span>
                        <span>녹화 중지</span>
                    </button>
                    <input type="file" id="fileInput" accept="video/*" style="display: none;">
                </div>

                <div id="analysisResult" class="analysis-result" style="display: none;">
                    <h3>분석 결과</h3>
                    <div class="result-content">
                        <div class="accuracy-score">
                            <div class="score-circle">
                                <span id="accuracyScore">0</span>%
                            </div>
                            <p>종합 정확도</p>
                        </div>
                        <div class="result-details">
                            <div class="detail-item">
                                <h4>원본 문장</h4>
                                <p id="originalText"></p>
                            </div>
                            <div class="detail-item">
                                <h4>인식된 문장</h4>
                                <p id="recognizedText"></p>
                            </div>
                            <div class="detail-item">
                                <h4>종합 피드백</h4>
                                <div id="feedbackText"></div>
                            </div>
                            <div class="detail-item">
                                <div id="timelineContainer"></div>
                            </div>
                            <div class="detail-item">
                                <div id="errorListContainer"></div>
                            </div>
                        </div>
                    </div>
                    <button class="btn-primary" id="retryBtn">다시<br>연습하기</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="dist/app.js"></script>
</body>
</html>
